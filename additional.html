<!doctype html>
<!--
	Template:	 Unika - Responsive One Page HTML5 Template
	Author:		 imransdesign.com
	URL:		 http://imransdesign.com/
    Designed By: https://www.behance.net/poljakova
	Version:	1.0
-->
<html lang="en-US">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Integrated project 2</title>
    <meta name="description" content="Unika - Responsive One Page HTML5 Template">
    <meta name="keywords" content="HTML5, Bootsrtrap, One Page, Responsive, Template, Portfolio" />
    <meta name="author" content="imransdesign.com">

    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google Fonts  -->
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,500' rel='stylesheet' type='text/css'> <!-- Body font -->
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400' rel='stylesheet' type='text/css'> <!-- Navbar font -->

    <!-- Libs and Plugins CSS -->
    <link rel="stylesheet" href="inc/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="inc/animations/css/animate.min.css">
    <link rel="stylesheet" href="inc/font-awesome/css/font-awesome.min.css"> <!-- Font Icons -->
    <link rel="stylesheet" href="inc/owl-carousel/css/owl.carousel.css">
    <link rel="stylesheet" href="inc/owl-carousel/css/owl.theme.css">

    <!-- Theme CSS -->
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mobile.css">

    <!-- Skin CSS -->
    <link rel="stylesheet" href="css/skin/cool-gray.css">
    <!-- <link rel="stylesheet" href="css/skin/ice-blue.css"> -->
    <!-- <link rel="stylesheet" href="css/skin/summer-orange.css"> -->
    <!-- <link rel="stylesheet" href="css/skin/fresh-lime.css"> -->
    <!-- <link rel="stylesheet" href="css/skin/night-purple.css"> -->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body data-spy="scroll" data-target="#main-navbar">
<div class="page-loader"></div>  <!-- Display loading image while page loads -->
<div class="body">

    <!--========== BEGIN HEADER ==========-->
    <header id="header" class="header-main">

        <!-- Begin Navbar -->
        <nav id="main-navbar" class="navbar navbar-default navbar-fixed-top" role="navigation"> <!-- Classes: navbar-default, navbar-inverse, navbar-fixed-top, navbar-fixed-bottom, navbar-transparent. Note: If you use non-transparent navbar, set "height: 98px;" to #header -->

            <div class="container">

                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand page-scroll" href="index.html">Unika</a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a class="page-scroll" href="index.html">Home</a></li>
                        <li><a class="page-scroll" href="authors.html">Authors</a></li>
                        <li><a class="page-scroll" href="geojson.html">GeoJSON</a></li>
                        <li><a class="page-scroll" href="earthquake.html">Earthquake Mapping</a></li>
                        <li><a class="page-scroll" href="additional.html">Additional</a></li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container -->
        </nav>
        <!-- End Navbar -->

    </header>
    <!-- ========= END HEADER =========-->




    <br><br>

    <!-- Begin Services -->
    <section id="services-section" class="page text-center">
        <!-- Begin page header-->
        <div class="page-header-wrapper">
            <div class="container" style="height:100px">
                <div class="page-header text-center wow fadeInDown" data-wow-delay="0.4s">
                    <h2>Additional Mapping</h2>
                    <div class="devider"></div>
                </div>
            </div>
        </div>
        <!-- End page header-->

        <!-- Begin roatet box-2 -->
                <div class="row">
                    <div  class="col-md-8" >
                        <div id="map" style="height: 500px; margin-left: 1%"></div>
                    </div>
                    <div class="col-md-4">
                        <div class="row">
                            <div class="col-md-4">
                                <button type="button" id="airports" class="btn-block">World Airports</button>
                                <div id="info"></div>
                            </div>
                            <div class="col-md-4">
                                <button type="button" id="geofeatures" class="btn-block">Geographical Features</button>
                                <div id="info1"></div>
                            </div>
                            <div class="col-md-4">
                                <button type="button" id="elevationpoints" class="btn-block">Elevation Points</button>
                                <div id="info2"></div>
                            </div>

                        </div>
                        <br>
                        <br>

                    </div>

                    <div class="col-md-4">
                        <div class="row">
                            <div class="col-md-4">
                                <button type="button" id="populatedcities" class="btn-block">Populated Cities</button>
                                <div id="info3"></div>
                            </div>
                            <div class="col-md-4">
                                <button type="button" id="tinycountires" class="btn-block">World Tiny Countries</button>
                                <div id="info4"></div>
                            </div>
                            <div class="col-md-4">
                                <button type="button" id="*" class="btn-block">Elevation Points</button>
                                <div id="info5"></div>
                            </div>

                        </div>
                    </div>
                </div> <!-- /.row -->
        <!-- /.container -->
        <style>
            .btn-block{
                min-height: 100px;
            }
        </style>
        <!-- End rotate-box-2 -->
    </section>
    <!-- End Services -->

    <!-- Begin footer -->
    <footer class="text-off-white">

        <div class="footer">
            <div class="container text-center wow fadeIn" data-wow-delay="0.4s">
                <p class="copyright">Copyright &copy; 2018 - Developed by Group 4</p>
            </div>
        </div>

    </footer>
    <!-- End footer -->

    <a href="#" class="scrolltotop"><i class="fa fa-arrow-up"></i></a> <!-- Scroll to top button -->

</div><!-- body ends -->




<!-- Plugins JS -->
<script src="inc/jquery/jquery-1.11.1.min.js"></script>
<script src="inc/bootstrap/js/bootstrap.min.js"></script>
<script src="inc/owl-carousel/js/owl.carousel.min.js"></script>
<script src="inc/stellar/js/jquery.stellar.min.js"></script>
<script src="inc/animations/js/wow.min.js"></script>
<script src="inc/waypoints.min.js"></script>
<script src="inc/isotope.pkgd.min.js"></script>
<script src="inc/classie.js"></script>
<script src="inc/jquery.easing.min.js"></script>
<script src="inc/jquery.counterup.min.js"></script>
<script src="inc/smoothscroll.js"></script>

<!-- Theme JS -->
<script src="js/theme.js"></script>
<script>
    var map;
    var thelocation;
    var titleName;

    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 2,
            center: new google.maps.LatLng(2.8, -187.3),
            mapTypeId: 'terrain'
        });
    }

    function checkIfNull(data) {
        if (data == null) {
            data = "#";
        }
        else {
            data = data.toString();
        }
    }

    function envokeJson(tagID, link, name, type, wiki, region, specialAttr ){
        $(tagID).click(function () {
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 2,
                center: new google.maps.LatLng(2.8, -187.3),
                mapTypeId: 'terrain'
            });
            $.ajax({
                url: link,
                error: function () {
                    $('#info').html('<p>An error has occurred</p>');
                },

                success: function (data) {

                    $.each(data.features, function (key, val) {
                        var coords = val.geometry.coordinates;
                        console.log(coords);
                        var name = val.properties.name;
                        if(name == null){
                            name = val.properties.sovereign;
                        }

                        var type = val.properties.type;
                        var region = val.properties.region;
                        var wiki = val.properties.wikipedia;
                        var specialAttr = val.properties.featureclass;

                        checkIfNull(name);
                        checkIfNull(type);
                        checkIfNull(region);
                        checkIfNull(wiki);
                        checkIfNull(specialAttr);

                        lat = coords[1]; // geojson uses (lng, lat) ordering so lat stored at coords[1]
                        lng = coords[0]; // lng stored at coords[0]

                        var latLng = new google.maps.LatLng(lat, lng);
                        var marker = new google.maps.Marker({
                            position: latLng,
                            map: map,
                            label: ""
                        });
                        the_href = val.properties.url + "\'" + ' target=\'_blank\'';
                        var infowindow = new google.maps.InfoWindow({


                            content: "<b>Name:</b> " + name + "<br>" +
                                     "<b>Class:</b> " + type + "<br>" +
                                     "<b>region:</b> "+ region +"<br>"+
                                     "<b>type: </b>"+ specialAttr + "<br>" +
                                     "<b><a target='_blank' href=" + wiki + ">Wikipedia</a></b>"
                        });
                        marker.addListener('click', function () {
                            // We use the lat and lon as the parameters in the API call to weather service
                            var lat = marker.position.lat();
                            var lng = marker.position.lng();
                            // You need to use the FREE signup at https://www.apixu.com/ to get a key for the Weather URL below
                            theURL = 'http://api.apixu.com/v1/current.json?key=b0b9974cbad446aaa95120149180911&q=' + lat.toFixed(4) + ',' + lng.toFixed(4);
                            $.ajax({
                                url: theURL,
                                success: function (data) {
                                    image = new Image();
                                    if (data.error) {
                                        image.src = "http://via.placeholder.com/64x64?text=%20";
                                        label: val.properties.scalerank.toString()// Error, so we use blank image for weather. See 'error:' below for another way to include a small blank image
                                    }
                                    else {
                                        image.src = "http:" + data.current.condition.icon; // icon is specified within the data

                                        $('#weatherInfo').html('<p>' + data.current.condition.text + '</p>'); // current weather in text format
                                    }
                                    image.onload = function () {
                                        $('#weatherImage').empty().append(image);
                                    };

                                },
                                error: function () { // Weather service could not provide weather for requested lat,lon world location
                                    image = new Image();
                                    // A local 64*64 transparent image. Generated from the useful site: http://png-pixel.com/
                                    image.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAPElEQVR42u3OMQEAAAgDIJfc6BpjDyQgt1MVAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBgXbgARTAX8ECcrkoAAAAAElFTkSuQmCC";
                                    image.onload = function () {
                                        //set the image into the web page
                                        $('#weatherImage').empty().append(image);
                                    };
                                }
                            });
                            infowindow.open(map, marker);
                        });
                    });
                }
            });
        });
    }

    $(document).ready(function () {

        var name = null;
        var type = null;
        var wiki = null;
        var region = null;
        var specialAtrr = null;

        envokeJson('#airports',"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_10m_airports.geojson",name
                    ,type, wiki, region, specialAtrr);

        envokeJson('#geofeatures',"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_50m_geography_regions_points.geojson",name
            ,type, wiki, region, specialAtrr);

        envokeJson('#elevationpoints',"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_10m_geography_regions_elevation_points.geojson",name
            ,type, wiki, region, specialAtrr);

        envokeJson('#populatedcities',"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_populated_places_simple.geojson",name
            ,type, wiki, region, specialAtrr);

        envokeJson('#tinycountires',"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_0_tiny_countries.geojson",name
            ,type, wiki, region, specialAtrr);




    });
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAmRjGTWPGovadlntnVUUyWyf8yPq3FQ2M&callback=initMap">
</script>

</body>


</html>
